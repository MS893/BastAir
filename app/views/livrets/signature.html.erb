<% content_for :title, "Signature : #{@livret.display_title}" %>

<div class="container my-5">
  <div class="text-center">
    <h1 class="mb-3 h3">Signature</h1>
    <p class="lead text-info"><%= @livret.display_title %></p>
    <p class="text-muted">
      Signé par <%= @livret.user.full_name %> le <%= l(@livret.updated_at, format: :long_with_at) %>
    </p>
  </div>

  <div class="d-flex justify-content-center my-4">
    <% if @livret.signature_image.attached? %>
      <%= image_tag @livret.signature_image, class: "img-fluid border rounded shadow-sm", style: "max-width: 600px;" %>
    <% else %>
      <div class="alert alert-warning text-center" role="alert">Aucune signature n'a été enregistrée pour ce livret.</div>
    <% end %>
  </div>

  <div class="text-center mt-4">
    <%# Le bouton de retour est conditionnel :
        - Pour un instructeur/admin, il retourne au livret de progression de l'élève.
        - Pour un élève, il retourne à la liste des cours. %>
    <% if current_user.instructeur? || current_user.admin? %>
      <%= link_to 'Retour au livret de progression', livret_progression_path(eleve_id: @livret.user_id), class: 'btn btn-secondary' %>
    <% else %>
      <%= link_to 'Retour à la liste des cours', elearning_index_path, class: 'btn btn-secondary' %>
    <% end %>
  </div>
</div>
