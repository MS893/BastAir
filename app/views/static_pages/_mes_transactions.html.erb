<%# --- SECTION 5 DERNIÈRES TRANSACTIONS --- %>
<% if @transactions.present? && @transactions.any? %>

  <div class="card h-100 shadow">
    <div class="card-header bg-info text-white">
      <h5 class="card-title mb-0">
        <i class="bi bi-currency-euro me-2"></i>Mes dernières transactions
        <%# On affiche le bouton seulement si l'utilisateur a plus de 5 transactions (qui tiennent dans la card) %>
        <% if current_user.transactions.count > 5 %>
          <%= link_to "Voir toutes mes transactions", 
                      transactions_path(user_id: current_user.id), 
                      class: "btn btn-sm btn-primary ms-5" %>
        <% end %>
      </h5>
    </div>
      <div class="list-group list-group-flush">
        <% @transactions.each do |transaction| %>
          <%= link_to transaction_path(transaction), class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center" do %>
            <div>
              <span class="text-muted"><%= l transaction.date_transaction, format: :short %></span> : 
              <strong><%= transaction.description %></strong>
            </div>
            <span class="badge <%= transaction.mouvement == 'Recette' ? 'bg-success' : 'bg-danger' %> rounded-pill fs-6">
              <%# Si c'est une dépense, on affiche un montant négatif %>
              <%= number_to_currency(transaction.mouvement == 'Recette' ? transaction.montant : -transaction.montant, unit: "€", separator: ",", delimiter: " ", format: "%n %u") %>
            </span>
          <% end %>
        <% end %>
      </div>
  </div>

<% end %>
